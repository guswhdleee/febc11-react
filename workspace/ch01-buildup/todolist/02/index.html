<!DOCTYPE html>
<html lang="ko">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Todo List App</title>
  </head>
  <body>
    <div id="todo">
      <header>
        <h1>Todo List - ë“±ë¡ ğŸ˜Š</h1>
        <p>íŒŒì¼ ê²½ë¡œ: <span id="filepath"></span></p>
      </header>
      <div id="main">
        <div id="container">
          <ul>
            <li>
              <h2>ì‡¼í•‘ ëª©ë¡</h2>
              <div class="todoinput">
                <input type="text" autofocus onkeyup="handleAddKeyup(event)" />
                <button type="button" onclick="handleAdd()">ì¶”ê°€</button>
              </div>
              <ul class="todolist">
                <li>
                  <span>1</span>
                  <span><s>ìƒ˜í”Œ1</s></span>
                  <button type="button">ì‚­ì œ</button>
                </li>
                <li>
                  <span>2</span>
                  <span>ìƒ˜í”Œ2</span>
                  <button type="button">ì‚­ì œ</button>
                </li>
                <li>
                  <span>3</span>
                  <span>ìƒ˜í”Œ3</span>
                  <button type="button">ì‚­ì œ</button>
                </li>
              </ul>
            </li>
          </ul>
        </div>
      </div>
      <footer>
        <p>ë©‹ìŸì´ ì‚¬ìì²˜ëŸ¼ FrontEnd BootCamp</p>
      </footer>
    </div>

    <script type="text/javascript">
      // http://localhost:5500/workspace-ins/ch01-buildup/todolist/sample/
      // ['http://localhost:5500/workspace-ins/', '/ch01-buildup/todolist/sample/']
      document.querySelector("#filepath").textContent = `ch${
        document.URL.split("/ch")[1]
      }index.html`;

      // ìƒ˜í”Œ ëª©ë¡
      const itemList = [
        { no: 1, title: "ë‘ë¶€", done: true },
        { no: 2, title: "ê³„ë€", done: false },
        { no: 3, title: "ë¼ë©´", done: true },
      ];

      // ul ìš”ì†Œ
      const todolistElem = document.querySelector(".todolist");
      // ê¸°ì¡´ ëª©ë¡ ì‚­ì œ
      while (todolistElem.firstChild) {
        todolistElem.firstChild.remove();
      }

      // itemList ë°°ì—´ì˜ ê° Todo ì•„ì´í…œì„ í™”ë©´ì— ì¶”ê°€
      itemList.forEach((item, index) => {
        const liElem = getTodoItemElem(item);
        // todolistElem.innerHTML += liElem;
        todolistElem.appendChild(liElem);
      });

      // í•œê±´ì˜ Todo ê°ì²´ë¥¼ ë°›ì•„ì„œ DOM ê°ì²´ë¡œ ë§Œë“¤ì–´ ë°˜í™˜
      function getTodoItemElem(item) {
        // return (`
        //   <li>
        //     <span>1</span>
        //     <span><s>ìƒ˜í”Œ1</s></span>
        //     <button type="button">ì‚­ì œ</button>
        //   </li>
        // `);

        // <li>
        const liElem = document.createElement("li");
        // <span>
        const noElem = document.createElement("span");
        // <span>
        const titleElem = document.createElement("span");
        // <button>
        const deleteElem = document.createElement("button");

        // 1
        const noTxt = document.createTextNode(item.no);
        // ìƒ˜í”Œ1
        const titleTxt = document.createTextNode(item.title);
        // ì‚­ì œ
        const deleteTxt = document.createTextNode("ì‚­ì œ");

        // <span>1</span>
        noElem.appendChild(noTxt);
        // <span><s>ìƒ˜í”Œ1</s></span>
        if (item.done) {
          // ì™„ë£Œ
          // <s>
          const sElem = document.createElement("s");
          // <s>ìƒ˜í”Œ1</s>
          sElem.appendChild(titleTxt);
          // <span><s>ìƒ˜í”Œ1</s></span>
          titleElem.appendChild(sElem);
        } else {
          // ë¯¸ì™„ë£Œ
          // <span>ìƒ˜í”Œ1</span>
          titleElem.appendChild(titleTxt);
        }
        // <button type="button">
        deleteElem.setAttribute("type", "button");

        // <button type="button">ì‚­ì œ</button>
        deleteElem.appendChild(deleteTxt);

        // <li><span>1</span></li>
        liElem.appendChild(noElem);

        // <li>
        //   <span>1</span>
        //   <span><s>ìƒ˜í”Œ1</s></span>
        // </li>
        liElem.appendChild(titleElem);

        // <li>
        //   <span>1</span>
        //   <span><s>ìƒ˜í”Œ1</s></span>
        //   <button type="button">ì‚­ì œ</button>
        // </li>
        liElem.appendChild(deleteElem);

        return liElem;
      }

      // "ì¶”ê°€" í´ë¦­ ì´ë²¤íŠ¸ í•¸ë“¤ëŸ¬
      const handleAdd = () => {
        const inputElem = document.querySelector(".todoinput > input");
        if (inputElem.value.trim() !== "") {
          addItem(inputElem.value);
          inputElem.value = "";
          inputElem.focus();
        }
      };

      // ì—”í„° ì´ë²¤íŠ¸
      const handleAddKeyup = (event) => {
        if (event.key === "Enter") handleAdd();
      };

      // í• ì¼ ì¶”ê°€
      function addItem(title) {
        const item = {
          no: itemList[itemList.length - 1].no + 1,
          title,
          done: false,
        };

        // ToDo : ë°ì´í„° ê°±ì‹ 
        itemList.push(item);

        // ToDo :  í™”ë©´ ê°±ì‹ 
        const itemElem = getTodoItemElem(item);
        const todolistElem = document.querySelector(".todolist");
        todolistElem.appendChild(itemElem);
      }

      // ì™„ë£Œ/ë¯¸ì™„ë£Œ ì²˜ë¦¬
      function toggleDone(no) {}

      // í• ì¼ ì‚­ì œ
      function deleteItem(no) {}
    </script>
  </body>
</html>
